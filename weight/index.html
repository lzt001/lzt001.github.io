<!DOCTYPE html>
<html>
<head>
    <title>
        weight indicator
    </title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="txt/html; charset=utf-8" />
    <meta name="theme-color" content="#4285f4">
    <script charset="utf-8" src="/weight/scan.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/weight/style.css">
    <link rel="icon" href="/weight/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/weight/favicon.ico" type="image/x-icon" />
</head>
<body>
    <canvas id="indicator"></canvas>
    <div id="settingwin">
        <p>身高：<input type="number" id="height" />cm</p>
        <p>
            出生年月：<input type="number" id="year" step="1" pattern="\d+" /> 年 
            <input type="number" id="month" step="1" min="1" max="12" pattern="\d+"/> 月 
        </p>
        <button id="confirm" onclick="update();">确定</button>
        <button id="close" onclick="document.getElementById('settingwin').style.visibility = 'hidden';">关闭</button>
    </div>
    <div id="warning"><p>请启用以下浏览器选项：</p>"chrome://flags#enable-experimental-web-platform-features" <p /></div>
    <div id="btns">
        <button id="start" onclick="scan();">开始扫描</button>
        <button id="setting" onclick="setting();">设置</button>
    </div>
    <canvas id="graph"></canvas>
    <script>
        fill();
        if (!localStorage.getItem("height")) {
            setting();
        }
        try {
            if (!navigator.bluetooth.requestLEScan) {
                show_warning()
                console.log("ble disabled");
            }
        }
        catch (error) {
            show_warning()
            console.log("no ble");
        }
    </script>
</body>
</html>